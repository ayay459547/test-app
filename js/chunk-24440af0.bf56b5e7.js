(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24440af0"],{"13d5":function(e,t,a){"use strict";var l=a("23e7"),o=a("d58f").left,n=a("a640"),c=a("2d00"),r=a("605d"),u=n("reduce"),d=!r&&c>79&&c<83;l({target:"Array",proto:!0,forced:!u||d},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},"49f7":function(e,t,a){"use strict";a("c862")},"605d":function(e,t,a){var l=a("c6b6"),o=a("da84");e.exports="process"==l(o.process)},"606a":function(e,t,a){"use strict";a("e95d")},"65e2":function(e,t,a){"use strict";var l=a("7a23");const o={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},n=Object(l["createElementVNode"])("g",{fill:"none"},[Object(l["createElementVNode"])("path",{d:"M6.5 1.75a.75.75 0 0 0-1.5 0V5H1.75a.75.75 0 0 0 0 1.5H5v3.25a.75.75 0 0 0 1.5 0V6.5h3.25a.75.75 0 0 0 0-1.5H6.5V1.75z",fill:"currentColor"})],-1),c=[n];t["a"]=Object(l["defineComponent"])({name:"Add12Filled",render:function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("svg",o,c)}})},a640:function(e,t,a){"use strict";var l=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&l((function(){a.call(null,t||function(){return 1},1)}))}},c862:function(e,t,a){},d58f:function(e,t,a){var l=a("59ed"),o=a("7b0b"),n=a("44ade"),c=a("07fa"),r=TypeError,u=function(e){return function(t,a,u,d){l(a);var i=o(t),s=n(i),m=c(i),b=e?m-1:0,p=e?-1:1;if(u<2)while(1){if(b in s){d=s[b],b+=p;break}if(b+=p,e?b<0:m<=b)throw r("Reduce of empty array with no initial value")}for(;e?b>=0:m>b;b+=p)b in s&&(d=a(d,s[b],b,i));return d}};e.exports={left:u(!1),right:u(!0)}},e95d:function(e,t,a){},feb7:function(e,t,a){"use strict";a.r(t);var l=a("7a23");const o={class:"teacher-wrapper"},n={class:"teacher-header"},c={class:"teacher-table"};function r(e,t,a,r,u,d){const i=Object(l["resolveComponent"])("TButton"),s=Object(l["resolveComponent"])("SchoolFilter"),m=Object(l["resolveComponent"])("TFilter"),b=Object(l["resolveComponent"])("TTable"),p=Object(l["resolveComponent"])("Create"),f=Object(l["resolveComponent"])("TModal"),h=Object(l["resolveComponent"])("Edit"),v=Object(l["resolveComponent"])("Delete");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o,[Object(l["createElementVNode"])("div",n,[Object(l["createVNode"])(i,{title:"新增",type:"primary",class:"n-mb-md",icon:e.Add12Filled,onClick:e.openCreate},null,8,["icon","onClick"]),Object(l["createVNode"])(m,{onClear:e.clearFilter,onSubmit:e.submitFilter},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(s,{ref:"refFilter",form:e.formValue,"onUpdate:form":t[0]||(t[0]=t=>e.formValue=t)},null,8,["form"])]),_:1},8,["onClear","onSubmit"])]),Object(l["createElementVNode"])("div",c,[Object(l["createVNode"])(b,{loading:e.loading,columns:e.columns,tableKey:e.tableKey,data:e.schoolData,filterFrom:e.filterFrom,"onUpdate:sorter":e.handleUpdateSorter},null,8,["loading","columns","tableKey","data","filterFrom","onUpdate:sorter"])]),Object(l["createVNode"])(f,{showModal:e.showModal.create,"onUpdate:showModal":t[1]||(t[1]=t=>e.showModal.create=t),title:"新增學校",onCancel:t[2]||(t[2]=t=>e.showModal.create=!1),onSubmit:e.addSchool},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(p,{ref:"refCreate"},null,512)]),_:1},8,["showModal","onSubmit"]),Object(l["createVNode"])(f,{showModal:e.showModal.edit,"onUpdate:showModal":t[3]||(t[3]=t=>e.showModal.edit=t),title:"編輯學校",onCancel:e.cancelEdit,onSubmit:e.updateSchool},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(h,{ref:"refEdit",data:e.currentModalData},null,8,["data"])]),_:1},8,["showModal","onCancel","onSubmit"]),Object(l["createVNode"])(f,{showModal:e.showModal.delete,"onUpdate:showModal":t[4]||(t[4]=t=>e.showModal.delete=t),title:"刪除學校",onCancel:e.cancelDelete,onSubmit:e.deleteSchool},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(v,{ref:"refDelete",data:e.currentModalData},null,8,["data"])]),_:1},8,["showModal","onCancel","onSubmit"])])}a("13d5"),a("14d9");var u=a("65e2"),d=a("3519"),i=a("0b62");const s={class:"n-pt-md"};var m={__name:"Filter",props:{form:{type:Object,default(){return{}}}},setup(e,{expose:t}){const a=e,o=Object(l["ref"])(null),n=Object(l["computed"])({get:()=>a.form,set:e=>emit("update:form",e)}),c=["name","phone","email"],r=Object(l["reactive"])({}),u=()=>{c.forEach(e=>{var t;switch(e){case"name":case"phone":case"email":const a=new RegExp(""+(null!==(t=n.value[e])&&void 0!==t?t:""));r[e]=e=>a.test(e);break;default:r[e]=e=>!0;break}})};return t({setData:u,getData:()=>r}),(e,t)=>{const a=Object(l["resolveComponent"])("n-input"),c=Object(l["resolveComponent"])("n-form-item"),r=Object(l["resolveComponent"])("n-form");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",s,[Object(l["createVNode"])(r,{ref_key:"formRef",ref:o,model:Object(l["unref"])(n)},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(c,{label:"名稱",path:"name"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:Object(l["unref"])(n).name,"onUpdate:value":t[0]||(t[0]=e=>Object(l["unref"])(n).name=e),placeholder:"输入名稱"},null,8,["value"])]),_:1}),Object(l["createVNode"])(c,{label:"電話",path:"phone"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:Object(l["unref"])(n).phone,"onUpdate:value":t[1]||(t[1]=e=>Object(l["unref"])(n).phone=e),placeholder:"输入電話"},null,8,["value"])]),_:1}),Object(l["createVNode"])(c,{label:"Email",path:"email"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:Object(l["unref"])(n).email,"onUpdate:value":t[2]||(t[2]=e=>Object(l["unref"])(n).email=e),placeholder:"輸入Email"},null,8,["value"])]),_:1})]),_:1},8,["model"])])}}};const b=m;var p=b,f={__name:"Create",setup(e,{expose:t}){const a=Object(l["ref"])(null),o=Object(l["ref"])({name:null,phone:null,email:null});return t({setData(e){o.value=e},getData(){return o.value},upload(e){return Object(i["a"])({url:"/school",method:"post",data:e},{fakeData:null,getFakeData:!0})}}),(e,t)=>{const n=Object(l["resolveComponent"])("n-input"),c=Object(l["resolveComponent"])("n-form-item"),r=Object(l["resolveComponent"])("n-form");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createVNode"])(r,{ref_key:"formRef",ref:a,model:o.value},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(c,{label:"名稱",path:"name"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(n,{value:o.value.name,"onUpdate:value":t[0]||(t[0]=e=>o.value.name=e),placeholder:"输入名稱"},null,8,["value"])]),_:1}),Object(l["createVNode"])(c,{label:"電話",path:"phone"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(n,{value:o.value.phone,"onUpdate:value":t[1]||(t[1]=e=>o.value.phone=e),placeholder:"输入電話"},null,8,["value"])]),_:1}),Object(l["createVNode"])(c,{label:"Email",path:"email"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(n,{value:o.value.email,"onUpdate:value":t[2]||(t[2]=e=>o.value.email=e),placeholder:"輸入Email"},null,8,["value"])]),_:1})]),_:1},8,["model"])])}}};const h=f;var v=h,O={__name:"Edit",props:{data:{type:Object,default(){return{id:null,name:null,phone:null,email:null}}}},setup(e,{expose:t}){const a=e,o=Object(l["ref"])(null),n=Object(l["ref"])({id:null,name:null,phone:null,email:null});return Object(l["onMounted"])(()=>{a.data.$forEach((e,t)=>{n.value[t]=e})}),t({setData(e){n.value=e},getData(){return n.value},upload(e,t){return Object(i["a"])({url:"/school/"+t,method:"put",data:e},{fakeData:null,getFakeData:!0})}}),(e,t)=>{const a=Object(l["resolveComponent"])("n-input"),c=Object(l["resolveComponent"])("n-form-item"),r=Object(l["resolveComponent"])("n-form");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createVNode"])(r,{ref_key:"formRef",ref:o,model:n.value},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(c,{label:"名稱",path:"name"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:n.value.name,"onUpdate:value":t[0]||(t[0]=e=>n.value.name=e),placeholder:"输入名稱"},null,8,["value"])]),_:1}),Object(l["createVNode"])(c,{label:"電話",path:"phone"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:n.value.phone,"onUpdate:value":t[1]||(t[1]=e=>n.value.phone=e),placeholder:"输入電話"},null,8,["value"])]),_:1}),Object(l["createVNode"])(c,{label:"Email",path:"email"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:n.value.email,"onUpdate:value":t[2]||(t[2]=e=>n.value.email=e),placeholder:"輸入Email"},null,8,["value"])]),_:1})]),_:1},8,["model"])])}}};const j=O;var w=j;const C={class:"delete-title"};var k={__name:"Delete",props:{data:{type:Object,default(){return{id:null,name:null,phone:null,email:null}}}},setup(e,{expose:t}){const a=e,o=Object(l["computed"])(()=>{var e,t;return null!==(e=null===(t=a.data)||void 0===t?void 0:t.name)&&void 0!==e?e:""});return t({getData(){return a.data},upload(e,t){return Object(i["a"])({url:"/school/"+t,method:"delete",data:e},{fakeData:null,getFakeData:!0})}}),(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",C,Object(l["toDisplayString"])(`確定刪除 ${Object(l["unref"])(o)} 嗎?`),1))}},V=(a("49f7"),a("6b0d")),g=a.n(V);const D=g()(k,[["__scopeId","data-v-2fa7e1ee"]]);var N=D,E=a("269c");const _=[{id:1,name:"測試學校",phone:"031857462",email:"testSchool123@gmail.com"},{id:2,name:"測試學校2",phone:"031857463",email:"testSchool321@gmail.com"},{id:3,name:"測試學校3",phone:"031857468",email:"testSchool456@gmail.com"},{id:4,name:"測試學校4",phone:"031857464",email:"testSchool456@gmail.com"}];var x=a("98922"),y=Object(l["defineComponent"])({components:{SchoolFilter:p,Create:v,Edit:w,Delete:N},setup(){const e=Object(l["ref"])(!1),t=Object(l["ref"])(0),a={school:Object(E["a"])()},o=Object(l["ref"])(null),n=Object(l["reactive"])({name:null,phone:null,email:null}),c=Object(l["reactive"])({});function r(e){e.$forEach((e,t)=>{c[t]=e})}const s=()=>{n.name=null,n.phone=null,n.email=null;const e=o.value.getData();r(e),t.value++},m=()=>{o.value.setData();const e=o.value.getData();r(e),t.value++},b=Object(l["ref"])([]),p=Object(l["computed"])(()=>b.value.reduce((e,{columnKey:t,order:a})=>(e[t]=a,e),{}));function f(e){b.value=[].concat(e)}const h=Object(l["computed"])(()=>[{key:"name",title:"名稱",width:150},{key:"phone",title:"電話",width:150},{title:"E-mail",key:"email",minWidth:200,sortOrder:p.value.email||!1,sorter:(e,t)=>e.email.length-t.email.length},{title:"管理",key:"actions",width:150,render(e){return Object(l["h"])("div",{class:"n-ga-md flex-row"},{default:()=>[Object(l["h"])(d["b"],{size:"small",onClick:()=>{y(e)}},{default:()=>"編輯"}),Object(l["h"])(d["b"],{size:"small",onClick:()=>{U(e)},type:"error"},{default:()=>"刪除"})]})}}]),v=Object(l["reactive"])([]),O=async()=>{await Object(i["a"])({url:"/school",method:"get"},{fakeData:_,getFakeData:!0}).then(e=>{e.forEach(e=>{v.push({key:e.id,...e})})})},j=async()=>{e.value=!0,v.splice(0),await Promise.all([O(),a.school.init()]),e.value=!1};Object(l["onMounted"])(()=>{j()});const w=Object(l["ref"])(null),C=Object(l["reactive"])({create:!1,edit:!1,delete:!1}),k=Object(x["a"])(),V=Object(l["ref"])(null),g=()=>{C.create=!0},D=()=>{const e=V.value.getData(),t=V.value.upload(e);t.then(()=>{const e="success";k[e]({content:"成功",meta:"資料更新",duration:1500,keepAliveOnHover:!0}),j(),C.create=!1})},N=Object(l["ref"])(null),y=e=>{C.edit=!0,w.value=e},M=()=>{C.edit=!1,w.value=null},S=()=>{const e=N.value.getData(),t=e.id,a=N.value.upload(e,t);a.then(()=>{const e="success";k[e]({content:"成功",meta:"資料更新",duration:1500,keepAliveOnHover:!0}),j(),C.edit=!1})},F=Object(l["ref"])(null),U=e=>{C.delete=!0,w.value=e},B=()=>{C.delete=!1,w.value=null},A=()=>{const e=F.value.getData(),t=e.id,a=F.value.upload(e,t);a.then(()=>{const e="success";k[e]({content:"成功",meta:"資料更新",duration:1500,keepAliveOnHover:!0}),j(),C.delete=!1})};return{loading:e,Add12Filled:u["a"],tableKey:t,store:a,formValue:n,filterFrom:c,refFilter:o,clearFilter:s,submitFilter:m,columns:h,schoolData:v,handleUpdateSorter:f,currentModalData:w,showModal:C,refCreate:V,openCreate:g,addSchool:D,refEdit:N,openEdit:y,cancelEdit:M,updateSchool:S,refDelete:F,openDelete:U,cancelDelete:B,deleteSchool:A}}});a("606a");const M=g()(y,[["render",r],["__scopeId","data-v-00b9e7d6"]]);t["default"]=M}}]);
//# sourceMappingURL=chunk-24440af0.bf56b5e7.js.map