{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/Record.vue","webpack:///./src/views/RecordFile/Filter.vue","webpack:///./src/views/RecordFile/Filter.vue?199b","webpack:///./node_modules/@vicons/fa/es/Trash.js","webpack:///./src/views/RecordFile/Create.vue","webpack:///./src/views/RecordFile/Create.vue?7ff5","webpack:///./src/views/RecordFile/Edit.vue","webpack:///./src/views/RecordFile/Edit.vue?c123","webpack:///./src/views/RecordFile/Delete.vue","webpack:///./src/views/RecordFile/Delete.vue?2f7e","webpack:///./src/views/RecordFile/FakeData.js","webpack:///./src/views/Record.vue?a6f3","webpack:///./node_modules/core-js/internals/engine-is-node.js","webpack:///./node_modules/@vicons/fluent/es/Add12Filled.js","webpack:///./src/views/RecordFile/Delete.vue?c2a2","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/views/Record.vue?7b62","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","STRICT_METHOD","CHROME_BUG","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_TButton","title","type","icon","_ctx","onClick","_component_TFilter","onClear","onSubmit","default","_component_StudentFilter","ref","form","_hoisted_3","_component_TTable","loading","columns","tableKey","data","filterFrom","_component_TModal","showModal","create","modalStyle","onCancel","_component_Create","edit","_component_Edit","delete","_component_Delete","store","school","useSchool","options","computed","list","map","item","label","name","value","id","formRef","formValue","get","props","set","v","emit","filterPropsList","reactive","setData","forEach","prop","s","RegExp","test","tempIndex","index","$findIndex","expose","getData","__exports__","xmlns","viewBox","d","fill","render","_cache","teacher","useTeacher","student","useStudent","mainTeacher","subTeacher","studentList","dateList","checkForm","studentOptions","prev","curr","push","tableColumn","key","minWidth","concat","setCheckForm","rowIndex","columnIndex","date","includes","attend","ps","getCheckForm","addDate","removeDate","splice","addStudent","removeStudent","setStudent","console","log","onMounted","upload","http","url","method","fakeData","getFakeData","$forEach","hasOwnProperty","rowId","FakeData","defineComponent","components","StudentFilter","Create","Edit","Delete","setup","getSchoolName","dataId","find","getTeacherName","refFilter","phone","email","fromSchool","setFilterFrom","tempFilterFrom","clearFilter","submitFilter","sortStatesRef","sortKeyMapOrderRef","result","columnKey","order","handleUpdateSorter","sorters","width","row","h","sortOrder","sorter","a","b","NButton","size","openEdit","openDelete","recordData","getStudentData","async","then","dateItem","init","Promise","all","currentModalData","notification","useNotification","refCreate","openCreate","createData","res","content","meta","duration","keepAliveOnHover","refEdit","cancelEdit","updateStudent","editData","refDelete","cancelDelete","deleteStudent","delData","Add12Filled","classof","global","module","exports","process","fails","METHOD_NAME","argument","call","aCallable","toObject","IndexedObject","lengthOfArrayLike","$TypeError","TypeError","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","i","right"],"mappings":"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","file":"js/chunk-287f69bd.fc921f7b.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\r\n  <div class=\"record-wrapper\">\r\n    <div class=\"record-header\">\r\n      <TButton \r\n        title=\"新增\" \r\n        type=\"primary\"\r\n        class=\"n-mb-md\"\r\n        :icon=\"Add12Filled\"\r\n        @click=\"openCreate\"\r\n      />\r\n\r\n      <TFilter @clear=\"clearFilter\" @submit=\"submitFilter\">\r\n        <template #default>\r\n          <StudentFilter ref=\"refFilter\" v-model:form=\"formValue\"/>\r\n        </template>\r\n      </TFilter>\r\n    </div>\r\n    <div class=\"record-table\">\r\n      <TTable \r\n        :loading=\"loading\" \r\n        :columns=\"columns\"\r\n        :tableKey=\"tableKey\"\r\n        :data=\"recordData\" \r\n        :filterFrom=\"filterFrom\"\r\n        @update:sorter=\"handleUpdateSorter\"\r\n      />\r\n    </div>\r\n\r\n    <TModal \r\n      v-model:showModal=\"showModal.create\" \r\n      title=\"新增紀錄\"\r\n      :modalStyle=\"modalStyle\"\r\n      @cancel=\"showModal.create = false\"\r\n      @submit=\"addStudent\"\r\n    >\r\n      <template #default>\r\n        <Create ref=\"refCreate\"/>\r\n      </template>\r\n    </TModal>\r\n\r\n    <TModal \r\n      v-model:showModal=\"showModal.edit\" \r\n      title=\"編輯紀錄\"\r\n      :modalStyle=\"modalStyle\"\r\n      @cancel=\"cancelEdit\"\r\n      @submit=\"updateStudent\"\r\n    >\r\n      <template #default>\r\n        <Edit ref=\"refEdit\" :data=\"currentModalData\"/>\r\n      </template>\r\n    </TModal>\r\n\r\n    <TModal \r\n      v-model:showModal=\"showModal.delete\" \r\n      title=\"刪除紀錄\"\r\n      @cancel=\"cancelDelete\"\r\n      @submit=\"deleteStudent\"\r\n    >\r\n      <template #default>\r\n        <Delete ref=\"refDelete\" :data=\"currentModalData\"/>\r\n      </template>\r\n    </TModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { h, defineComponent, ref, reactive, onMounted, computed } from 'vue'\r\nimport { Add12Filled } from '@vicons/fluent'\r\nimport { NButton } from 'naive-ui'\r\nimport http from '@/lib/axios.js'\r\nimport StudentFilter from './RecordFile/Filter.vue'\r\nimport Create from './RecordFile/Create.vue'\r\nimport Edit from './RecordFile/Edit.vue'\r\nimport Delete from './RecordFile/Delete.vue'\r\nimport { useSchool } from '@/store/school.js'\r\nimport { useStudent } from '@/store/student.js'\r\nimport { useTeacher } from '@/store/teacher.js'\r\nimport { FakeData } from './RecordFile/FakeData.js'\r\nimport { useNotification } from 'naive-ui'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    StudentFilter,\r\n    Create,\r\n    Edit,\r\n    Delete\r\n  },\r\n  setup() {\r\n    const loading = ref(false)\r\n\r\n    const tableKey = ref(0)\r\n    // store\r\n    const store = {\r\n      school: useSchool(),\r\n      student: useStudent(),\r\n      teacher: useTeacher()\r\n    }\r\n    const getSchoolName = (dataId) => {\r\n      const data = store.school.list.find(item => item.id === dataId)\r\n\r\n      return data?.name ?? `無此學校 ${dataId} ID`\r\n    }\r\n\r\n    const getTeacherName = (dataId) => {\r\n      if(dataId === null) return '無'\r\n      const data = store.teacher.list.find(item => item.id === dataId)\r\n      \r\n      return data?.name ?? `無此老師 ${dataId} ID`\r\n    }\r\n\r\n    // filter\r\n    const refFilter = ref(null)\r\n    const formValue = reactive({\r\n      name: null,\r\n      phone: null,\r\n      email: null,\r\n      fromSchool: null\r\n    })\r\n    const filterFrom = reactive({})\r\n\r\n    function setFilterFrom (tempFilterFrom) {\r\n      tempFilterFrom.$forEach((item, key) => {\r\n        filterFrom[key] = item\r\n      })\r\n    }\r\n\r\n    const clearFilter = () => {\r\n      formValue.name = null\r\n      formValue.phone = null\r\n      formValue.email = null\r\n      formValue.fromSchool = null\r\n\r\n      const tempFilterFrom = refFilter.value.getData()\r\n      setFilterFrom(tempFilterFrom)\r\n      tableKey.value++\r\n    }\r\n    const submitFilter = () => {\r\n      refFilter.value.setData()\r\n\r\n      const tempFilterFrom = refFilter.value.getData()\r\n      setFilterFrom(tempFilterFrom)\r\n      tableKey.value++\r\n    }\r\n\r\n    // table\r\n    const sortStatesRef = ref([])\r\n    const sortKeyMapOrderRef = computed(() =>\r\n      sortStatesRef.value.reduce((result, { columnKey, order }) => {\r\n        result[columnKey] = order\r\n        return result\r\n      }, {})\r\n    )\r\n    function handleUpdateSorter (sorters) {\r\n      sortStatesRef.value = [].concat(sorters)\r\n    }\r\n\r\n    const columns = computed(() => [\r\n      {\r\n        key: 'name',\r\n        title: '名稱',\r\n        width: 150\r\n      },\r\n      {\r\n        title: '學校',\r\n        key: 'school',\r\n        width: 150,\r\n        render (row) {\r\n          return h(\r\n            'div', {}, { default: () => getSchoolName(row.school)}\r\n          )\r\n        }\r\n      },\r\n      {\r\n        title: '老師',\r\n        key: 'mainTeacher',\r\n        width: 150,\r\n        render (row) {\r\n          return h(\r\n            'div', {}, { default: () => getTeacherName(row.mainTeacher)}\r\n          )\r\n        }\r\n      },\r\n      {\r\n        title: '助教',\r\n        key: 'subTeacher',\r\n        width: 150,\r\n        render (row) {\r\n          return h(\r\n            'div', {}, { default: () => getTeacherName(row.subTeacher)}\r\n          )\r\n        }\r\n      },\r\n      {\r\n        title: '學生數',\r\n        key: 'studentList',\r\n        minWidth: 200,\r\n        sortOrder: sortKeyMapOrderRef.value.fromSchool || false,\r\n        sorter: (a, b) => a.fromSchool.length - b.fromSchool.length,\r\n        render (row) {\r\n          return h(\r\n            'div', {}, { default: () => row.studentList.length }\r\n          )\r\n        }\r\n      },\r\n      {\r\n        title: '管理',\r\n        key: 'actions',\r\n        width: 150,\r\n        render(row) {\r\n          return h(\r\n            'div',\r\n            {\r\n              class: 'n-ga-md flex-row'\r\n            },\r\n            {\r\n              default: () => [\r\n                h(\r\n                  NButton,\r\n                  {\r\n                    size: 'small',\r\n                    onClick: () => {\r\n                      openEdit(row)\r\n                    }\r\n                  },\r\n                  { default: () => '編輯' }\r\n                ),\r\n                h(\r\n                  NButton,\r\n                  {\r\n                    size: 'small',\r\n                    onClick: () => {\r\n                      openDelete(row)\r\n                    },\r\n                    type: 'error'\r\n                  },\r\n                  { default: () => '刪除' }\r\n                ) \r\n              ]\r\n            }\r\n          )\r\n        }\r\n      }\r\n    ])\r\n\r\n    const recordData = reactive([])\r\n    const getStudentData = async () => {\r\n      await http({\r\n        url: '/record',\r\n        method: 'get',\r\n      }, {\r\n        fakeData: FakeData,\r\n        getFakeData: true\r\n      }).then(dateList => {\r\n        dateList.forEach(dateItem => {\r\n          recordData.push({\r\n            key: dateItem.id,\r\n            ...dateItem\r\n          })\r\n        })\r\n      })\r\n    }\r\n\r\n    const init = async() => {\r\n      loading.value = true\r\n      recordData.splice(0)\r\n      await Promise.all([\r\n        getStudentData(), \r\n        store.student.init()\r\n      ])\r\n\r\n      loading.value = false\r\n    }\r\n\r\n    onMounted(() => {\r\n      init()\r\n    })\r\n\r\n    // modal\r\n    const currentModalData = ref(null)\r\n    const showModal = reactive({\r\n      create: false,\r\n      edit: false,\r\n      delete: false\r\n    })\r\n\r\n    const notification = useNotification()\r\n    // create\r\n    const refCreate = ref(null)\r\n    const openCreate = () => {\r\n      showModal.create = true\r\n    }\r\n    const addStudent = () => {\r\n      const createData = refCreate.value.getData()\r\n      const res = refCreate.value.upload(createData)\r\n      res.then(() => {\r\n        const type = 'success'\r\n        notification[type]({\r\n          content: \"成功\",\r\n          meta: \"資料更新\",\r\n          duration: 1500,\r\n          keepAliveOnHover: true\r\n        })\r\n        init()\r\n        showModal.create = false\r\n      })\r\n    }\r\n    // edit\r\n    const refEdit = ref(null)\r\n    const openEdit = (row) => {\r\n      showModal.edit = true\r\n      currentModalData.value = row\r\n    }\r\n    const cancelEdit = () => {\r\n      showModal.edit = false\r\n      currentModalData.value = null\r\n    }\r\n    const updateStudent = () => {\r\n      const editData = refEdit.value.getData()\r\n      const rowId = editData.id\r\n      const res = refEdit.value.upload(editData, rowId)\r\n      res.then(() => {\r\n        const type = 'success'\r\n        notification[type]({\r\n          content: \"成功\",\r\n          meta: \"資料更新\",\r\n          duration: 1500,\r\n          keepAliveOnHover: true\r\n        })\r\n        init()\r\n        showModal.edit = false\r\n      })\r\n    }\r\n    // delete\r\n    const refDelete = ref(null)\r\n    const openDelete = (row) => {\r\n      showModal.delete = true\r\n      currentModalData.value = row\r\n    }\r\n    const cancelDelete = () => {\r\n      showModal.delete = false\r\n      currentModalData.value = null\r\n    }\r\n    const deleteStudent = () => {\r\n      const delData = refDelete.value.getData()\r\n      const rowId = delData.id\r\n      const res = refDelete.value.upload(delData, rowId)\r\n      res.then(() => {\r\n        const type = 'success'\r\n        notification[type]({\r\n          content: \"成功\",\r\n          meta: \"資料更新\",\r\n          duration: 1500,\r\n          keepAliveOnHover: true\r\n        })\r\n        init()\r\n        showModal.delete = false\r\n      })\r\n    }\r\n    return {\r\n      loading,\r\n      Add12Filled,\r\n      // 為了filter 重新渲染\r\n      tableKey,\r\n      // store\r\n      store,\r\n      getSchoolName,\r\n      getTeacherName,\r\n      // filter\r\n      formValue,\r\n      filterFrom,\r\n      refFilter,\r\n      clearFilter,\r\n      submitFilter,\r\n      // table\r\n      columns,\r\n      recordData,\r\n      handleUpdateSorter,\r\n      // modal\r\n      currentModalData,\r\n      showModal,\r\n      // create\r\n      refCreate,\r\n      openCreate,\r\n      addStudent,\r\n      // edit\r\n      refEdit,\r\n      openEdit,\r\n      cancelEdit,\r\n      updateStudent,\r\n      // delete\r\n      refDelete,\r\n      openDelete,\r\n      cancelDelete,\r\n      deleteStudent,\r\n      // modal style\r\n      modalStyle: {\r\n        width: '80%',\r\n        minWidth: '500px'\r\n      }\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.record {\r\n  &-wrapper {\r\n    padding: 16px;\r\n    overflow: auto;\r\n    height: calc(100% - 32px);\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  &-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  &-table {\r\n    flex: 1;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"n-pt-md\">\r\n    <n-form ref=\"formRef\" :model=\"formValue\">\r\n      <n-form-item label=\"名稱\" path=\"name\">\r\n        <n-input v-model:value=\"formValue.name\" placeholder=\"输入名稱\" />\r\n      </n-form-item>\r\n      <n-form-item label=\"學校\" path=\"fromSchool\">\r\n        <n-select\r\n          v-model:value=\"formValue.fromSchool\"\r\n          placeholder=\"輸入學校\"\r\n          :options=\"options\"\r\n        />\r\n      </n-form-item>\r\n    </n-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, defineExpose, defineProps, computed } from 'vue'\r\nimport { useSchool } from '@/store/school.js'\r\n\r\nconst store = {\r\n  school: useSchool()\r\n}\r\nconst options = computed(() => {\r\n  return store.school.list.map(item => {\r\n    return {\r\n      label: item.name,\r\n      value: item.id\r\n    }\r\n  })\r\n})\r\n\r\nconst formRef = ref(null)\r\n\r\nconst props = defineProps({\r\n  form: {\r\n    type: Object,\r\n    default () {\r\n      return {}\r\n    }\r\n  }\r\n})\r\n\r\nconst formValue = computed({\r\n  get: () => props.form,\r\n  set: v => emit('update:form', v)\r\n})\r\n\r\nconst filterPropsList = ['name', 'fromSchool']\r\n\r\nconst filterFrom = reactive({})\r\n\r\nconst setData = () => {\r\n  filterPropsList.forEach(prop => {\r\n    switch (prop) {\r\n      case 'name':\r\n        const s = new RegExp(`${formValue.value[prop] ?? ''}`)\r\n        filterFrom[prop] = (v) => { return s.test(v) }\r\n        break\r\n      case 'fromSchool':\r\n        if (formValue.value[prop]) {\r\n          const tempIndex = formValue.value[prop]\r\n          filterFrom[prop] = (v) => { \r\n            const index =  v.$findIndex(item => {\r\n              return item === tempIndex\r\n            })\r\n            return index > -1\r\n          }\r\n        } else {\r\n          filterFrom[prop] = (v) => { return true }\r\n        }\r\n        break\r\n      default:\r\n        filterFrom[prop] = (v) => { return true }\r\n        break\r\n    }\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  setData,\r\n  getData: () => {\r\n    return filterFrom\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>","import script from \"./Filter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Filter.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 448 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'Trash',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","<template>\r\n  <div>\r\n    <n-form ref=\"formRef\" :model=\"formValue\" class=\"grid-row\">\r\n      <n-form-item label=\"名稱\" path=\"name\">\r\n        <n-input v-model:value=\"formValue.name\" placeholder=\"输入名稱\" />\r\n      </n-form-item>\r\n      <n-form-item label=\"老師\" path=\"mainTeacher\" class=\"grid-col-lg-8\">\r\n        <n-select\r\n          v-model:value=\"formValue.mainTeacher\"\r\n          placeholder=\"輸入老師\"\r\n          :options=\"options.teacher\"\r\n          clearable\r\n        />\r\n      </n-form-item>\r\n      <n-form-item label=\"助教\" path=\"subTeacher\" class=\"grid-col-lg-8\">\r\n        <n-select\r\n          v-model:value=\"formValue.subTeacher\"\r\n          placeholder=\"輸入老師\"\r\n          :options=\"options.teacher\"\r\n          clearable\r\n        />\r\n      </n-form-item>\r\n      <n-form-item label=\"學校\" path=\"school\" class=\"grid-col-lg-8\">\r\n        <n-select\r\n          v-model:value=\"formValue.school\"\r\n          placeholder=\"輸入學校\"\r\n          :options=\"options.school\"\r\n          clearable\r\n        />\r\n      </n-form-item>\r\n    </n-form>\r\n\r\n    <div class=\"flex-row content-end n-ga-md\">\r\n      <TButton \r\n        title=\"加入學生\" \r\n        type=\"info\"\r\n        class=\"n-mb-md\"\r\n        :icon=\"Add12Filled\"\r\n        @click=\"addStudent\"\r\n      />\r\n      <TButton \r\n        title=\"加入日期\" \r\n        type=\"info\"\r\n        class=\"n-mb-md\"\r\n        :icon=\"Add12Filled\"\r\n        @click=\"addDate\"\r\n      />\r\n    </div>\r\n\r\n    <div>\r\n      <FormTable \r\n        :column=\"tableColumn\"\r\n        :row=\"formValue.checkForm\"\r\n      >\r\n        <template v-slot:header-student=\"{ data }\">\r\n          <div>{{ data }}</div>\r\n        </template>\r\n        <template v-slot:header=\"{ columnIndex }\">\r\n          <div class=\"flex-row n-ga-sm\">\r\n            <n-date-picker \r\n              v-model:formatted-value=\"formValue.dateList[columnIndex]\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              type=\"date\"\r\n              clearable\r\n            />\r\n\r\n            <TButton\r\n              type=\"error\"\r\n              :icon=\"Trash\"\r\n              circle\r\n              @click=\"removeDate(columnIndex)\"\r\n            />\r\n          </div>\r\n        </template>\r\n\r\n        <template v-slot:column-student=\"{ rowIndex }\">\r\n          <div class=\"flex-row n-ga-sm\">\r\n            <n-select\r\n              :value=\"formValue.studentList[rowIndex]\"\r\n              placeholder=\"輸入學生\"\r\n              :options=\"studentOptions\"\r\n              clearable\r\n              @update:value=\"setStudent($event, rowIndex)\"\r\n            />\r\n\r\n            <TButton\r\n              type=\"error\"\r\n              :icon=\"Trash\"\r\n              circle\r\n              @click=\"removeStudent(rowIndex)\"\r\n            />\r\n          </div>\r\n        </template>\r\n        <template v-slot:column=\"{ rowIndex, columnIndex }\">\r\n          <div class=\"flex-row align-center n-ga-sm\">\r\n            <n-checkbox \r\n              :value=\"getCheckForm(rowIndex, columnIndex, 'attend')\" \r\n              @update:checked=\"setCheckForm($event, rowIndex, columnIndex, 'attend')\"\r\n            />\r\n\r\n            <n-input \r\n              :value=\"getCheckForm(rowIndex, columnIndex, 'ps')\"\r\n              placeholder=\"備註\"\r\n              @update:value=\"setCheckForm($event, rowIndex, columnIndex, 'ps')\"\r\n            />\r\n          </div>\r\n        </template>\r\n      </FormTable>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, defineExpose, reactive, onMounted } from 'vue'\r\nimport { useSchool } from '@/store/school.js'\r\nimport { useTeacher } from '@/store/teacher.js'\r\nimport { useStudent } from '@/store/student.js'\r\nimport http from '@/lib/axios.js'\r\nimport { Add12Filled } from '@vicons/fluent'\r\nimport { Trash } from '@vicons/fa'\r\n\r\nconst store = {\r\n  school: useSchool(),\r\n  teacher: useTeacher(),\r\n  student: useStudent()\r\n}\r\n\r\nconst formRef = ref(null)\r\n  \r\nconst formValue = reactive({\r\n  name: null,\r\n  school: null,\r\n  mainTeacher: null,\r\n  subTeacher: null,\r\n  studentList: [],\r\n  dateList: [],\r\n  checkForm: []\r\n})\r\n\r\nconst options = computed(() => {\r\n  return {\r\n    school: store.school.list.map(item => {\r\n      return {\r\n        label: item.name,\r\n        value: item.id\r\n      }\r\n    }),\r\n    teacher: store.teacher.list.map(item => {\r\n      return {\r\n        label: item.name,\r\n        value: item.id\r\n      }\r\n    })\r\n  }\r\n})\r\n\r\nconst studentOptions = computed(() => {\r\n  return store.student.list.reduce((prev, curr) => {\r\n    // if (!formValue.studentList.includes(curr.id)) {\r\n    //   prev.push({\r\n    //     label: curr.name,\r\n    //     value: curr.id\r\n    //   })\r\n    // }\r\n\r\n    prev.push({\r\n      label: curr.name,\r\n      value: curr.id\r\n    })\r\n    return prev\r\n  }, [])\r\n})\r\n\r\nconst tableColumn = computed(() => {\r\n  return [\r\n    {\r\n      title: '學生名稱',\r\n      key: 'student',\r\n      minWidth: 180\r\n    }\r\n  ].concat(\r\n    formValue.dateList.map((item, index) => {\r\n      return {\r\n        title: item,\r\n        key: item,\r\n        index,\r\n        minWidth: 200\r\n      }\r\n    })\r\n  )\r\n})\r\n\r\nfunction setCheckForm (v, rowIndex, columnIndex, type) {\r\n  const date = formValue.dateList[columnIndex]\r\n\r\n  if ([null, undefined].includes(date)) return\r\n\r\n  if ([null, undefined].includes(formValue.checkForm[rowIndex][date])) {\r\n    formValue.checkForm[rowIndex][date] = {\r\n      attend: 'false',\r\n      ps: ''\r\n    }\r\n  }\r\n\r\n  formValue.checkForm[rowIndex][date][type] = `${v}`\r\n}\r\n\r\nfunction getCheckForm (rowIndex, columnIndex, type) {\r\n  const date = formValue.dateList[columnIndex]\r\n\r\n  const form = formValue.checkForm[rowIndex][date] ?? {\r\n    attend: 'true',\r\n    ps: ''\r\n  }\r\n\r\n  return form[type]\r\n}\r\n\r\nfunction addDate () {\r\n  formValue.dateList.push(null)\r\n}\r\nfunction removeDate (index) {\r\n  formValue.dateList.splice(index, 1)\r\n}\r\n\r\n// const sutendtList = computed(() => {\r\n//   return store.student.list\r\n// })\r\n\r\nfunction addStudent () {\r\n  // formValue.studentList.push(studentId)\r\n  formValue.checkForm.push({\r\n    student: {\r\n      attend: false,\r\n      ps: ''\r\n    }\r\n  })\r\n}\r\nfunction removeStudent (rowIndex) {\r\n  formValue.checkForm.splice(rowIndex, 1)\r\n}\r\n\r\nfunction setStudent (v, rowIndex) {\r\n  console.log('v => ', v)\r\n  console.log('rowIndex => ', rowIndex)\r\n\r\n  formValue.studentList[rowIndex] = v\r\n}\r\n\r\nonMounted(() => {\r\n  addDate()\r\n})\r\n\r\ndefineExpose({\r\n  setData(data, key) {\r\n    if (![null, undefined, ''].includes(key)) {\r\n      formValue[key] = data\r\n    }\r\n  },\r\n  getData(key) {\r\n    if (![null, undefined].includes(key)) {\r\n      return formValue[key]\r\n    } else {\r\n      return formValue\r\n    }\r\n  },\r\n  upload(data) {\r\n    return http({ \r\n      url: '/record', \r\n      method: 'post', \r\n      data\r\n    },{\r\n      fakeData: null,\r\n      getFakeData: true\r\n    })\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import script from \"./Create.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Create.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <n-form ref=\"formRef\" :model=\"formValue\" class=\"grid-row\">\r\n      <n-form-item label=\"名稱\" path=\"name\">\r\n        <n-input v-model:value=\"formValue.name\" placeholder=\"输入名稱\" />\r\n      </n-form-item>\r\n      <n-form-item label=\"老師\" path=\"mainTeacher\" class=\"grid-col-lg-8\">\r\n        <n-select\r\n          v-model:value=\"formValue.mainTeacher\"\r\n          placeholder=\"輸入老師\"\r\n          :options=\"options.teacher\"\r\n          clearable\r\n        />\r\n      </n-form-item>\r\n      <n-form-item label=\"助教\" path=\"subTeacher\" class=\"grid-col-lg-8\">\r\n        <n-select\r\n          v-model:value=\"formValue.subTeacher\"\r\n          placeholder=\"輸入老師\"\r\n          :options=\"options.teacher\"\r\n          clearable\r\n        />\r\n      </n-form-item>\r\n      <n-form-item label=\"學校\" path=\"school\" class=\"grid-col-lg-8\">\r\n        <n-select\r\n          v-model:value=\"formValue.school\"\r\n          placeholder=\"輸入學校\"\r\n          :options=\"options.school\"\r\n          clearable\r\n        />\r\n      </n-form-item>\r\n    </n-form>\r\n\r\n    <div class=\"flex-row content-end n-ga-md\">\r\n      <TButton \r\n        title=\"加入學生\" \r\n        type=\"info\"\r\n        class=\"n-mb-md\"\r\n        :icon=\"Add12Filled\"\r\n        @click=\"addStudent\"\r\n      />\r\n      <TButton \r\n        title=\"加入日期\" \r\n        type=\"info\"\r\n        class=\"n-mb-md\"\r\n        :icon=\"Add12Filled\"\r\n        @click=\"addDate\"\r\n      />\r\n    </div>\r\n\r\n    <div>\r\n      <FormTable\r\n        :column=\"tableColumn\"\r\n        :row=\"formValue.checkForm\"\r\n      >\r\n        <template v-slot:header-student=\"{ data }\">\r\n          <div>{{ data }}</div>\r\n        </template>\r\n        <template v-slot:header=\"{ columnIndex }\">\r\n          <div class=\"flex-row n-ga-sm\">\r\n            <n-date-picker \r\n              v-model:formatted-value=\"formValue.dateList[columnIndex]\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              type=\"date\"\r\n              clearable\r\n            />\r\n\r\n            <TButton\r\n              type=\"error\"\r\n              :icon=\"Trash\"\r\n              circle\r\n              @click=\"removeDate(columnIndex)\"\r\n            />\r\n          </div>\r\n        </template>\r\n\r\n        <template v-slot:column-student=\"{ rowIndex }\">\r\n          <div class=\"flex-row n-ga-sm\">\r\n            <n-select\r\n              :value=\"formValue.studentList[rowIndex]\"\r\n              placeholder=\"輸入學生\"\r\n              :options=\"studentOptions\"\r\n              clearable\r\n              @update:value=\"setStudent($event, rowIndex)\"\r\n            />\r\n\r\n            <TButton\r\n              type=\"error\"\r\n              :icon=\"Trash\"\r\n              circle\r\n              @click=\"removeStudent(rowIndex)\"\r\n            />\r\n          </div>\r\n        </template>\r\n        <template v-slot:column=\"{ rowIndex, columnIndex }\">\r\n          <div class=\"flex-row align-center n-ga-sm\">\r\n            <n-checkbox \r\n              :value=\"getCheckForm(rowIndex, columnIndex, 'attend')\" \r\n              @update:checked=\"setCheckForm($event, rowIndex, columnIndex, 'attend')\"\r\n            />\r\n\r\n            <n-input \r\n              :value=\"getCheckForm(rowIndex, columnIndex, 'ps')\"\r\n              placeholder=\"備註\"\r\n              @update:value=\"setCheckForm($event, rowIndex, columnIndex, 'ps')\"\r\n            />\r\n          </div>\r\n        </template>\r\n      </FormTable>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, defineExpose, reactive, onMounted } from 'vue'\r\nimport { useSchool } from '@/store/school.js'\r\nimport { useTeacher } from '@/store/teacher.js'\r\nimport { useStudent } from '@/store/student.js'\r\nimport http from '@/lib/axios.js'\r\nimport { Add12Filled } from '@vicons/fluent'\r\nimport { Trash } from '@vicons/fa'\r\n\r\nconst store = {\r\n  school: useSchool(),\r\n  teacher: useTeacher(),\r\n  student: useStudent()\r\n}\r\n\r\nconst formRef = ref(null)\r\n\r\nconst props = defineProps({\r\n  data: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        id: null,\r\n        name: null,\r\n        school: null,\r\n        mainTeacher: null,\r\n        subTeacher: null,\r\n        studentList: [],\r\n        dateList: [],\r\n        checkForm: []\r\n      }\r\n    }\r\n  }\r\n})\r\n  \r\nconst formValue = reactive({\r\n  id: null,\r\n  name: null,\r\n  school: null,\r\n  mainTeacher: null,\r\n  subTeacher: null,\r\n  studentList: [],\r\n  dateList: [],\r\n  checkForm: []\r\n})\r\n\r\nconst options = computed(() => {\r\n  return {\r\n    school: store.school.list.map(item => {\r\n      return {\r\n        label: item.name,\r\n        value: item.id\r\n      }\r\n    }),\r\n    teacher: store.teacher.list.map(item => {\r\n      return {\r\n        label: item.name,\r\n        value: item.id\r\n      }\r\n    })\r\n  }\r\n})\r\n\r\nconst studentOptions = computed(() => {\r\n  return store.student.list.map(item => {\r\n    return {\r\n      label: item.name,\r\n      value: item.id\r\n    }\r\n  })\r\n})\r\n\r\nonMounted(() => {\r\n  props.data.$forEach((value, key) => {\r\n    if (formValue.hasOwnProperty(key)) {\r\n      formValue[key] = value\r\n    }\r\n  })\r\n})\r\n\r\nconst tableColumn = computed(() => {\r\n  return [\r\n    {\r\n      title: '學生名稱',\r\n      key: 'student',\r\n      minWidth: 180\r\n    }\r\n  ].concat(\r\n    formValue.dateList.map((item, index) => {\r\n      return {\r\n        title: item,\r\n        key: item,\r\n        index,\r\n        minWidth: 200\r\n      }\r\n    })\r\n  )\r\n})\r\n\r\nfunction setCheckForm (v, rowIndex, columnIndex, type) {\r\n  const date = formValue.dateList[columnIndex]\r\n\r\n  if ([null, undefined].includes(date)) return\r\n\r\n  if ([null, undefined].includes(formValue.checkForm[rowIndex][date])) {\r\n    formValue.checkForm[rowIndex][date] = {\r\n      attend: 'false',\r\n      ps: ''\r\n    }\r\n  }\r\n\r\n  formValue.checkForm[rowIndex][date][type] = `${v}`\r\n}\r\n\r\nfunction getCheckForm (rowIndex, columnIndex, type) {\r\n  const date = formValue.dateList[columnIndex]\r\n\r\n  const form = formValue.checkForm[rowIndex][date] ?? {\r\n    attend: 'true',\r\n    ps: ''\r\n  }\r\n\r\n  return form[type]\r\n}\r\n\r\nfunction addDate () {\r\n  formValue.dateList.push(null)\r\n}\r\nfunction removeDate (index) {\r\n  formValue.dateList.splice(index, 1)\r\n}\r\n\r\nconst sutendtList = computed(() => {\r\n  return store.student.list\r\n})\r\n\r\nfunction addStudent () {\r\n  // formValue.studentList.push(studentId)\r\n  formValue.checkForm.push({\r\n    student: {\r\n      attend: 'false',\r\n      ps: ''\r\n    }\r\n  })\r\n}\r\nfunction removeStudent (rowIndex) {\r\n  formValue.checkForm.splice(rowIndex, 1)\r\n}\r\n\r\nfunction setStudent (v, rowIndex) {\r\n  formValue.studentList[rowIndex] = v\r\n}\r\n\r\nonMounted(() => {\r\n  addDate()\r\n})\r\n\r\ndefineExpose({\r\n  setData(data, key) {\r\n    if (![null, undefined, ''].includes(key)) {\r\n      formValue[key] = data\r\n    }\r\n  },\r\n  getData(key) {\r\n    if (![null, undefined].includes(key)) {\r\n      return formValue[key]\r\n    } else {\r\n      return formValue\r\n    }\r\n  },\r\n  upload(data, rowId) {\r\n    return http({ \r\n      url: `/record/${rowId}`,\r\n      method: 'put', \r\n      data\r\n    },{\r\n      fakeData: null,\r\n      getFakeData: true\r\n    })\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import script from \"./Edit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"delete-title\">\r\n    {{ `確定刪除 ${name} 嗎?` }}\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineExpose, computed } from 'vue'\r\nimport http from '@/lib/axios.js'\r\n\r\nconst props = defineProps({\r\n  data: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        id: null,\r\n        name: null,\r\n        phone: null,\r\n        email: null\r\n      }\r\n    }\r\n  }\r\n})\r\nconst name = computed(() => {\r\n  return props.data?.name ?? ''\r\n})\r\n\r\ndefineExpose({\r\n  getData() {\r\n    return props.data\r\n  },\r\n  upload(data, rowId) {\r\n    return http({ \r\n      url: `/record/${rowId}`,\r\n      method: 'delete', \r\n      data\r\n    },{\r\n      fakeData: null,\r\n      getFakeData: true\r\n    })\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.delete-title {\r\n  font-size: 1.2em;\r\n  color: $danger;\r\n}\r\n</style>","import script from \"./Delete.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Delete.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Delete.vue?vue&type=style&index=0&id=0a6e1334&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\XAMPP\\\\htdocs\\\\time-sheet-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0a6e1334\"]])\n\nexport default __exports__","export const FakeData = [\r\n  {\r\n    id: 1,\r\n    name: '紀錄1',\r\n    school: 1,\r\n    mainTeacher: 1,\r\n    subTeacher: null,\r\n    studentList: [\r\n      1,\r\n      3\r\n    ],\r\n    dateList: [\r\n      '2022-01-01',\r\n      '2022-01-08'\r\n    ],\r\n    checkForm: [\r\n      {\r\n        student: 1,\r\n        '2022-01-01': {\r\n          attend: 'true',\r\n          ps: 'test'\r\n        },\r\n        '2022-01-08': {\r\n          attend: 'false',\r\n          ps: 'test555'\r\n        }\r\n      },\r\n      {\r\n        student: 3,\r\n        '2022-01-01': {\r\n          attend: 'false',\r\n          ps: 'b123'\r\n        },\r\n        '2022-01-08': {\r\n          attend: 'false',\r\n          ps: 'a777'\r\n        }\r\n      }\r\n    ]\r\n  }\r\n]","import { render } from \"./Record.vue?vue&type=template&id=49838e2b&scoped=true\"\nimport script from \"./Record.vue?vue&type=script&lang=js\"\nexport * from \"./Record.vue?vue&type=script&lang=js\"\n\nimport \"./Record.vue?vue&type=style&index=0&id=49838e2b&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\XAMPP\\\\htdocs\\\\time-sheet-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49838e2b\"]])\n\nexport default __exports__","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 12 12'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'g',\n  {\n    fill: 'none'\n  },\n  [\n    /*#__PURE__*/ _createElementVNode('path', {\n      d: 'M6.5 1.75a.75.75 0 0 0-1.5 0V5H1.75a.75.75 0 0 0 0 1.5H5v3.25a.75.75 0 0 0 1.5 0V6.5h3.25a.75.75 0 0 0 0-1.5H6.5V1.75z',\n      fill: 'currentColor'\n    })\n  ],\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'Add12Filled',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Delete.vue?vue&type=style&index=0&id=0a6e1334&lang=scss&scoped=true\"","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Record.vue?vue&type=style&index=0&id=49838e2b&lang=scss&scoped=true\"","var aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}