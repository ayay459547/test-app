{"version":3,"sources":["webpack:///./src/views/Map/index.vue","webpack:///./src/views/Map/index.vue?7c66","webpack:///./src/views/Map/index.vue?8351"],"names":["mapRef","ref","inputText","options","reactive","onAutocompleteUpdate","text","includes","length","value","getPlacePredictions","setOptions","list","splice","temp","map","item","label","description","place_id","push","origin","location","placeId","name","address","phoneNumber","rating","setOrigin","currentPosition","target","onSelect","getDetails","setTarget","async","placeDetail","geometry","formatted_address","formatted_phone_number","createMarker","setRoute","openInfowindow","service","marker","places","autocompleteService","directionsService","directionsRenderer","infoWindow","__exports__"],"mappings":"iUA6BA,MAAMA,EAASC,iBAAI,MACbC,EAAYD,iBAAI,IAChBE,EAAUC,sBAAS,IAEnBC,EAAwBC,IACxB,CAAC,KAAM,IAAIC,SAASD,IAASA,EAAKE,QAAU,GAE5CR,GACFA,EAAOS,MAAMC,oBAAoBJ,IAG/BK,EAAcC,IAClBT,EAAQU,OAAO,GACf,MAAMC,EAAOF,EAAKG,IAAIC,IAAQ,MAC5B,MAAO,CACLC,MAAOD,EAAKE,YACZT,MAAqB,QAAhB,EAAM,OAAJO,QAAI,IAAJA,OAAI,EAAJA,EAAMG,gBAAQ,QAAIH,EAAKE,eAGlCf,EAAQiB,QAAQN,IAIZO,EAASjB,sBAAS,CACtBkB,SAAU,GACVC,QAAS,GACTC,KAAM,OACNC,QAAS,GACTC,YAAa,GACbC,OAAQ,KAEJC,EAAaC,IACjBR,EAAOC,SAAWO,GAGdC,EAAS1B,sBAAS,CACtBkB,SAAU,GACVC,QAAS,GACTC,KAAM,GACNC,QAAS,GACTC,YAAa,GACbC,OAAQ,KAEJI,EAAYR,IACZvB,GACFA,EAAOS,MAAMuB,WAAWT,IAGtBU,EAAYC,UAChBJ,EAAOR,SAAWa,EAAYC,SAASd,SACvCQ,EAAOP,QAAUY,EAAYhB,SAC7BW,EAAON,KAAOW,EAAYX,KAC1BM,EAAOL,QAAUU,EAAYE,kBAC7BP,EAAOJ,YAAcS,EAAYG,uBACjCR,EAAOH,OAASQ,EAAYR,OAExB3B,UACIA,EAAOS,MAAM8B,aAAaT,EAAOR,SAAUQ,EAAOP,eAElDvB,EAAOS,MAAM+B,SAASnB,EAAQS,GACpC9B,EAAOS,MAAMgC,eAAeX,EAAOP,WAIjCmB,EAAU,CACdC,QAAQ,EACRC,QAAQ,EACRC,qBAAqB,EACrBC,mBAAmB,EACnBC,oBAAoB,EACpBC,YAAY,G,4mBC7Fd,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,gB,kCCRf","file":"js/chunk-dba9aa0a.99265a3b.js","sourcesContent":["<template>\r\n  <div class=\"map-wrapper grid-row\">\r\n    <div class=\"map-container grid-col-lg-16\">\r\n      <VGoogleMap\r\n        ref=\"mapRef\"\r\n        mapTypeId=\"roadmap\" \r\n        position\r\n        :service=\"service\"\r\n        @sendOptions=\"setOptions\"\r\n        @currentPosition=\"setOrigin\"\r\n        @sendPlace=\"setTarget\"\r\n      ></VGoogleMap>\r\n    </div>\r\n\r\n    <div class=\"map-control grid-col-lg-8\">\r\n      <n-auto-complete\r\n        v-model:value=\"inputText\"\r\n        :options=\"options\"\r\n        clearable\r\n        @update:value=\"onAutocompleteUpdate\"\r\n        @select=\"onSelect\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\n\r\nconst mapRef = ref(null)\r\nconst inputText = ref('')\r\nconst options = reactive([])\r\n\r\nconst onAutocompleteUpdate = (text) => {\r\n  if ([null, ''].includes(text) || text.length <= 0) return\r\n\r\n  if (mapRef) {\r\n    mapRef.value.getPlacePredictions(text)\r\n  }\r\n}\r\nconst setOptions = (list) => {\r\n  options.splice(0)\r\n  const temp = list.map(item => {\r\n    return {\r\n      label: item.description,\r\n      value: item?.place_id ?? item.description\r\n    }\r\n  })\r\n  options.push(...temp)\r\n}\r\n\r\n\r\nconst origin = reactive({\r\n  location: {},\r\n  placeId: '',\r\n  name: '當前位置',\r\n  address: '',\r\n  phoneNumber: '',\r\n  rating: '',\r\n})\r\nconst setOrigin = (currentPosition) => {\r\n  origin.location = currentPosition\r\n}\r\n\r\nconst target = reactive({\r\n  location: {},\r\n  placeId: '',\r\n  name: '',\r\n  address: '',\r\n  phoneNumber: '',\r\n  rating: '',\r\n})\r\nconst onSelect = (placeId) => {\r\n  if (mapRef) {\r\n    mapRef.value.getDetails(placeId)\r\n  }\r\n}\r\nconst setTarget = async (placeDetail) => {\r\n  target.location = placeDetail.geometry.location\r\n  target.placeId = placeDetail.place_id\r\n  target.name = placeDetail.name\r\n  target.address = placeDetail.formatted_address\r\n  target.phoneNumber = placeDetail.formatted_phone_number\r\n  target.rating = placeDetail.rating\r\n\r\n  if (mapRef) {\r\n    await mapRef.value.createMarker(target.location, target.placeId)\r\n\r\n    await mapRef.value.setRoute(origin, target)\r\n    mapRef.value.openInfowindow(target.placeId)\r\n  }\r\n}\r\n\r\nconst service = {\r\n  marker: true,\r\n  places: true,\r\n  autocompleteService: true,\r\n  directionsService: true,\r\n  directionsRenderer: true,\r\n  infoWindow: true,\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.map {\r\n  &-wrapper {\r\n    width: 100%;\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n    padding: 16px;\r\n  }\r\n  \r\n  &-container {\r\n    width: inherit;\r\n    height: inherit;\r\n    overflow: hidden;\r\n  }\r\n\r\n  &-control {\r\n    width: inherit;\r\n    height: inherit;\r\n  }\r\n}\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c1653926&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\XAMPP\\\\htdocs\\\\time-sheet-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c1653926\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=c1653926&lang=scss&scoped=true\""],"sourceRoot":""}